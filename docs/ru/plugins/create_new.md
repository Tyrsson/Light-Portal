# Создание плагина
Плагины, или аддоны — дополнения, расширяющие возможности портала. Чтобы создать собственный аддон для Light Portal, достаточно следовать инструкциям ниже.

!> С версии 1.5 Light Portal имеет встроенный функционал для создания заготовок плагинов. Чтобы им воспользоваться, перейдите в секцию _Админка -> Настройки портала -> Плагины -> Добавить плагин_.

!> С версии 1.9 функционал для создания плагинов вынесен в отдельный плагин — **PluginMaker**. Скачайте и подключите его на странице _Админка -> Настройки портала -> Плагины_.

## Выбор типа аддона
На данный момент в Light Portal доступны следующие типы дополнений:

* 'block' — аддоны, добавляющие новый вид блоков для портала
* 'editor' — аддоны, добавляющие сторонний редактор для разных типов контента
* 'comment' — аддоны, добавляющие сторонний виджет комментариев, вместо стандартного
* 'parser' — аддоны, реализующие парсер контента страниц или блоков
* 'article' — аддоны для обработки содержимого карточек статей на главной
* 'frontpage' — аддоны для изменения главной страницы портала
* 'impex' — аддоны для импорта и экспорта различных элементов портала
* 'other' — аддоны, не входящие ни в одну из категорий выше
* 'block_options' и 'page_options' — аддоны, добавляющие дополнительные параметры для соответствующей сущности (блока или страницы)

## Создание директории аддона
Создайте отдельную папку для файлов вашего дополнения, внутри `/Sources/LightPortal/addons`. Например, если ваш аддон называется `MyAddon`, структура папки должна выглядеть так:

```php
    ...(addons)
        MyAddon\
            langs\
                 english.php
                 index.php
                 russian.php
            index.php
            MyAddon.php
```

Файл `index.php` можно скопировать из папок других дополнений. В файле `MyAddon.php` содержится логика плагина:

```php
<?php

/**
 * MyAddon
 *
 * @package Light Portal (название портала, не менять)
 * @link https://dragomano.ru/mods/light-portal (ссылка на страницу портала, либо на страницу вашего дополнения, если оно не идет в комплекте с порталом)
 * @author Ваш никнейм и почта
 * @copyright Год создания дополнения и ваш никнейм (ещё раз)
 * @license Ссылка на лицензию, под которой распространяется ваше дополнение, и название лицензии
 *
 * @version 1.9 (версия портала, на которой разрабатывалось и тестировалось ваше дополнение)
 */

namespace Bugo\LightPortal\Addons\MyAddon;

use Bugo\LightPortal\Addons\Plugin;
use Bugo\LightPortal\Helpers; // Оставьте, если в коде дополнения будете использовать хелперы портала

class MyAddon extends Plugin
{
    // Используемые свойства и методы
}

```

## Использование Composer
Ваш плагин может использовать сторонние скрипты, устанавливающиеся через Composer.
Убедитесь, что в директории плагина расположен файл `composer.json`, в котором указаны необходимые зависимости. В директории `src` могут находиться ключевые файлы используемых вами скриптов.
Перед публикацией вашего плагина откройте директорию плагина в командной строке и выполните команду: `composer install --no-dev -o`. После этого всё содержимое директории плагина можно упаковать как отдельную модификацию для SMF (для примера см. пакет **PluginMaker**).